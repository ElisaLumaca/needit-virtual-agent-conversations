<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__06899f534fd00010d249b50c75a93e79">02899f531bd00010aec940c6cc4bcb7a</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"361023509c6a4e34a95dc50532a8a0c6","triggerType":"request","id":"361023509c6a4e34a95dc50532a8a0c6"}],"goals":[{"name":"primary","trigger_id":"361023509c6a4e34a95dc50532a8a0c6","nodes":[{"type":"StartGoal","goal_id":"7f44e09107a04b6386f648c4afad5f89","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"e05c943b0385447ba1be494a72a56485","name":"Start"},{"type":"TerminateGoal","goal_id":"7f44e09107a04b6386f648c4afad5f89","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"6cc8ed98757d4c2d9d4cb016ef538c85","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"fd4c6a50e9a347df8999b894a3da9fea","name":"NeedIt Type","goal_id":"7f44e09107a04b6386f648c4afad5f89","variable_id":"49af7f0f7d0e421bbe4357f5c0dd4e6d","message":{"type":"String","mode":"string","value":"What type of NeedIt record would you like to view?"},"optional":false},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()"},"id":"6126cde1aab54d93b2d1372558b57d38","name":"Confirm NeedIt Type","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"9a5452ca1fa4420993bd2068df63ae5f","name":"NeedIt List","goal_id":"7f44e09107a04b6386f648c4afad5f89","variable_id":"af7b1eafc4b349049cfaa5e0d652aadd","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view"},"optional":false,"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"af7b1eafc4b349049cfaa5e0d652aadd","fields":["priority","short_description","u_when_needed"],"id":"e73d29d7441d4995bda41e63b9dfa344","name":"NeedIt Card","goal_id":"7f44e09107a04b6386f648c4afad5f89","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"InputPrompt","variable_id":"ddbe774bb9a34fe7b60ee7adb733ab7d","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"optional":false,"id":"86173b114c6f473b844887b7e824dfe1","name":"Search Again","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"Decision","name":" Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"7b71f97179df49b6b7e61d3fd2fe0487","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"59dbb7a8201b4cc7aebca635539d7c9c","name":"Yes"}],"id":"89ea75b7ea0d435d9a6feb1eda18be9a","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"InputPrompt","variable_id":"0fac567b029e4eeeb5b4b75093c273bb","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"optional":false,"id":"b6378b106379449296fa8e836e3fced5","name":"New When Needed Date","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"af7b1eafc4b349049cfaa5e0d652aadd","id":"6618de062a0449f89729bb1c5f163adf","name":"Change When Needed Date","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"af7b1eafc4b349049cfaa5e0d652aadd","fields":["u_when_needed"],"id":"3f247f0935af42f38791bea5156cf732","name":"Updated NeedIt","goal_id":"7f44e09107a04b6386f648c4afad5f89","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"5430337c1f284238a8c4a41f04bf73c9","name":"What to update","goal_id":"7f44e09107a04b6386f648c4afad5f89","variable_id":"1899364adf6c4eed91dab5040726af5a","message":{"type":"String","mode":"string","value":"What do you have to update?"},"optional":false},{"type":"Decision","name":"Update field","branches":[{"type":"Branch","label":"When Needed","expression":{"type":"Applicability","mode":"query","value":""},"id":"554d5a0182e94bf6afe316fc185185b0","name":"When Needed"},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":""},"id":"c0f50cbaa8534a639595bf17af3c2b26","name":"Short Description"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":""},"id":"92dc69a4fe9b45f2af4ed2b5f948e003","name":"Nothing"}],"id":"80ce7939cb4d43eab7198c4690cade50","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"InputPrompt","variable_id":"4b6a8542edc1453a9c011591fd71856b","message":{"type":"String","mode":"string","value":"What is the Description?"},"optional":false,"id":"80340bf067924ecc86f84709dca4f7c2","name":"New Short Description","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"CRUDAction","mode":"create","query":"short_description={{vaInputs.new_short_description}}","variable_id":"6dda37f02ca04d739b611e9c4d8f1c46","id":"3701f97a0ddc49f8920e89ea3b1d8e9d","name":"Change Short Description","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()","id":"4a926e691b7b435a878c03469cf2042c","name":"Update search_count","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"Decision","name":"Search_count_value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()"},"id":"93da0f5327aa48c5a64a5bf43e1ef076","name":"Less than 3"},{"type":"Branch","label":"3 or More","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is more than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &gt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()"},"id":"21ac7a12b34e4a4186f16f6aaa200a43","name":"3 or More"}],"id":"a308cabb360a4571a8490415429752fe","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, inform users they will be transfered to a live agent\n\t    // otherwise, let them know how to work with more NeedIt records\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return 'You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.'\n\t    } else {\n\t        return 'You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\t    }\n\t})()"},"id":"d5844bf8f4a142398e02ec8a55212d27","name":"Quota Reached","goal_id":"7f44e09107a04b6386f648c4afad5f89"},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Transfer to a live agent\n\t    vaSystem.connectToAgent()\n\t})()","id":"bc92ecd45dde4a8a8c5e2d9edb8c71fb","name":" Transfer to Agent","goal_id":"7f44e09107a04b6386f648c4afad5f89","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, return true\n\t    // otherwise, return false\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n\t})()"}}],"edges":[{"type":"Edge","source_node_id":"e05c943b0385447ba1be494a72a56485","target_node_id":"fd4c6a50e9a347df8999b894a3da9fea","id":"e8fd6157bcde4279a23aa32a563c7ffb"},{"type":"Edge","source_node_id":"fd4c6a50e9a347df8999b894a3da9fea","target_node_id":"6126cde1aab54d93b2d1372558b57d38","id":"9f13eea533e44940bd43b2e0f83f8840"},{"type":"Edge","source_node_id":"6126cde1aab54d93b2d1372558b57d38","target_node_id":"9a5452ca1fa4420993bd2068df63ae5f","id":"05c43fa1d81b41b78e99c26e8c02b208"},{"type":"Edge","source_node_id":"9a5452ca1fa4420993bd2068df63ae5f","target_node_id":"e73d29d7441d4995bda41e63b9dfa344","id":"d003778e71fc41c19c62d114fdd2bc4d"},{"type":"Edge","source_node_id":"86173b114c6f473b844887b7e824dfe1","target_node_id":"89ea75b7ea0d435d9a6feb1eda18be9a","id":"574d81bd27a840ec986f77ea7ddcdbcc"},{"type":"Edge","source_node_id":"89ea75b7ea0d435d9a6feb1eda18be9a","target_node_id":"6cc8ed98757d4c2d9d4cb016ef538c85","branch_id":"7b71f97179df49b6b7e61d3fd2fe0487","id":"28014291c2354387a9b3cfb0589675fe","name":"7b71f97179df49b6b7e61d3fd2fe0487"},{"type":"Edge","source_node_id":"b6378b106379449296fa8e836e3fced5","target_node_id":"6618de062a0449f89729bb1c5f163adf","id":"4e5252076bf740fc92fcea27bb1e8ed4"},{"type":"Edge","source_node_id":"6618de062a0449f89729bb1c5f163adf","target_node_id":"3f247f0935af42f38791bea5156cf732","id":"998fe4d077aa4daba314d0af63313aed"},{"type":"Edge","source_node_id":"3f247f0935af42f38791bea5156cf732","target_node_id":"86173b114c6f473b844887b7e824dfe1","id":"8ff26fea5f774387a6bc165746e4bddc"},{"type":"Edge","source_node_id":"e73d29d7441d4995bda41e63b9dfa344","target_node_id":"5430337c1f284238a8c4a41f04bf73c9","id":"b39b7b1bbc77443b9cc4594e4030d598"},{"type":"Edge","source_node_id":"5430337c1f284238a8c4a41f04bf73c9","target_node_id":"80ce7939cb4d43eab7198c4690cade50","id":"58a7f0ea89fc423e8fc8fd6c63ecf849"},{"type":"Edge","source_node_id":"80ce7939cb4d43eab7198c4690cade50","target_node_id":"b6378b106379449296fa8e836e3fced5","branch_id":"554d5a0182e94bf6afe316fc185185b0","id":"30671f87c3224baab7620a8d76e6115e","name":"554d5a0182e94bf6afe316fc185185b0"},{"type":"Edge","source_node_id":"80ce7939cb4d43eab7198c4690cade50","target_node_id":"80340bf067924ecc86f84709dca4f7c2","branch_id":"c0f50cbaa8534a639595bf17af3c2b26","id":"b42ab8c140a54f3b878c8ef2972c0ad8","name":"c0f50cbaa8534a639595bf17af3c2b26"},{"type":"Edge","source_node_id":"80340bf067924ecc86f84709dca4f7c2","target_node_id":"3701f97a0ddc49f8920e89ea3b1d8e9d","id":"74059cf27a00495eb893eb21651a6a71"},{"type":"Edge","source_node_id":"3701f97a0ddc49f8920e89ea3b1d8e9d","target_node_id":"3f247f0935af42f38791bea5156cf732","id":"9b06ab84f4b2465996bb94e0688da4ce"},{"type":"Edge","source_node_id":"80ce7939cb4d43eab7198c4690cade50","target_node_id":"86173b114c6f473b844887b7e824dfe1","branch_id":"92dc69a4fe9b45f2af4ed2b5f948e003","id":"8f2859a0200548aab3d8f2e1caa872b7","name":"92dc69a4fe9b45f2af4ed2b5f948e003"},{"type":"Edge","source_node_id":"89ea75b7ea0d435d9a6feb1eda18be9a","target_node_id":"4a926e691b7b435a878c03469cf2042c","branch_id":"59dbb7a8201b4cc7aebca635539d7c9c","id":"8adc3b2e75584ee585c95bfc9e6eb540","name":"59dbb7a8201b4cc7aebca635539d7c9c"},{"type":"Edge","source_node_id":"4a926e691b7b435a878c03469cf2042c","target_node_id":"a308cabb360a4571a8490415429752fe","id":"09c420abd7e74290b2ca36c086a18c7c"},{"type":"Edge","source_node_id":"a308cabb360a4571a8490415429752fe","target_node_id":"fd4c6a50e9a347df8999b894a3da9fea","branch_id":"93da0f5327aa48c5a64a5bf43e1ef076","id":"764dc46bbb714f7f8142e23ab3a6b41e","name":"93da0f5327aa48c5a64a5bf43e1ef076"},{"type":"Edge","source_node_id":"a308cabb360a4571a8490415429752fe","target_node_id":"d5844bf8f4a142398e02ec8a55212d27","branch_id":"21ac7a12b34e4a4186f16f6aaa200a43","id":"0233b6ebfc5b4c3e831839060d9485fc","name":"21ac7a12b34e4a4186f16f6aaa200a43"},{"type":"Edge","source_node_id":"d5844bf8f4a142398e02ec8a55212d27","target_node_id":"bc92ecd45dde4a8a8c5e2d9edb8c71fb","id":"929b29798f014346a4708a4b2f65310c"},{"type":"Edge","source_node_id":"bc92ecd45dde4a8a8c5e2d9edb8c71fb","target_node_id":"6cc8ed98757d4c2d9d4cb016ef538c85","id":"8e2d85bd334d4e9ca61cbb900cdc95a1"}],"id":"7f44e09107a04b6386f648c4afad5f89"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"7d473c41b9044c41adec2a042d43f2e3"}],"glide_variables":[{"type":"Choice","choices":[{"name":"legal","element":"legal"},{"name":"facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"49af7f0f7d0e421bbe4357f5c0dd4e6d","name":"needit_type"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"},{"type":"Reference","table":"x_58872_needit_needit","id":"af7b1eafc4b349049cfaa5e0d652aadd","name":"needit_list"},{"type":"True/False","id":"ddbe774bb9a34fe7b60ee7adb733ab7d","name":"search_again"},{"type":"Date/Time","mode":"date","id":"0fac567b029e4eeeb5b4b75093c273bb","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"ac7a9c401f604a268bc9b092893bd254","name":"change_when_needed_date"},{"type":"Choice","choices":[{"name":"legal","element":"legal"},{"name":"facilities","element":"facilities"},{"name":"human resources","element":"hr"}],"id":"1899364adf6c4eed91dab5040726af5a","name":"what_to_update"},{"type":"String","name":"new_short_description","id":"4b6a8542edc1453a9c011591fd71856b"},{"type":"Reference","table":"x_58872_needit_needit","id":"6dda37f02ca04d739b611e9c4d8f1c46","name":"change_short_description"}],"roles":[],"scope":"c48a39c31b140010aec940c6cc4bcb5f","id":"780312431b140010aec940c6cc4bcb2d","name":"_PRVW__06899f534fd00010d249b50c75a93e79","key_phrases":["Update NeedIt Records","NeedItRequest"]}</design_definition>
        <design_topic_id>780312431b140010aec940c6cc4bcb2d</design_topic_id>
        <name>_PRVW__06899f534fd00010d249b50c75a93e79</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-10-10 15:24:50</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>868917571b140010aec940c6cc4bcbe3</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_387513_needit_vi">c48a39c31b140010aec940c6cc4bcb5f</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">c48a39c31b140010aec940c6cc4bcb5f</sys_scope>
        <sys_update_name>sys_cb_design_topic_868917571b140010aec940c6cc4bcbe3</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-10-10 15:24:50</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
